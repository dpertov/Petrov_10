<!DOCTYPE html>
<html>
	<head>
		<title> ArraySort </title>
		<meta charset="utf-8">
	</head>
	<body>
		<h1> Сортировка Дата/Время </h1>
		
		<script>
	
			var users = [
				{
				   date: '31/09/2019',
				  msg: 'him kill him repeat',
				 },
			 	{
				   date: '30/09/2019',
				  msg: 'him kill Alisa',
				 },
				 {
				  date: '12/03/2019',
				  msg: 'Some message here',
				 },
				 {
				  date: '29/07/2019',
				  msg: 'About Venona',
				 },
				{
				  date: '31/07/2019',
				  msg: 'Ilon Mask studi in Hillel',
				},
				 {
				  date: '31/07/2019',
				  msg: 'ilon Mask was born in Odessa.',
				 },
				 {
				  date: '30/09/2019',
				  msg: 'Alisa kill him',
				 },
				 {
				   date: '30/09/2019',
				  msg: 'him kill him',
				 },
				 {
				  date: '29/07/2019',
				  msg: 'Venona kill Alisa',
				 }
			];

			var sortbyData = function (arr) {

				arr.map(function(item, index) { 
					return item.date = item.date.split('/').reverse().join('/');
				 });

				arr.sort(function(a, b) {
					var dateA = new Date(a.date), dateB = new Date(b.date);
					return dateA - dateB;
				});
				 return arr;
			}

			var newArr = sortbyData(users);
			console.log (newArr);

			var finalArr = newArr.reduce(function (accum, item, index) {

					if (index === 0 || (item.date !== accum[accum.length - 1].title)) {
					 	var temparr = [];
					 	temparr.push(item.msg)
					 	var obj = { 
					 		title: item.date, 
					 		items: temparr
						}

						accum.push(obj);
					}

					else {
						accum[accum.length - 1].items.push(item.msg)
					}
				return accum;
			},[]);

			console.log(finalArr);
	
		</script>
	</body>
</html>